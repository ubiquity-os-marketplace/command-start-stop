{
  "name": "@ubiquity-os/command-start-stop",
  "short_name": "ubiquity-os-marketplace/command-start-stop@main",
  "description": "Enables the assignment and graceful unassignment of tasks to contributors.",
  "commands": {
    "start": {
      "description": "Assign yourself and/or others to the issue/task.",
      "ubiquity:example": "/start",
      "parameters": {
        "type": "object",
        "required": ["teammates"],
        "properties": {
          "teammates": {
            "description": "GitHub usernames to assign to the issue/task.",
            "examples": [["@UbiquityOS"]],
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "stop": {
      "description": "Unassign yourself from the issue/task.",
      "ubiquity:example": "/stop",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    }
  },
  "ubiquity:listeners": ["pull_request.opened", "pull_request.edited", "issues.unassigned"],
  "skipBotEvents": true,
  "configuration": {
    "default": {},
    "type": "object",
    "properties": {
      "reviewDelayTolerance": {
        "default": "1 Day",
        "examples": ["1 Day", "5 Days"],
        "description": "When considering a user for a task: if they have existing PRs with no reviews, how long should we wait before 'increasing' their assignable task limit?",
        "type": "string"
      },
      "taskStaleTimeoutDuration": {
        "default": "30 Days",
        "examples": ["1 Day", "5 Days"],
        "description": "When displaying the '/start' response, how long should we wait before considering a task 'stale' and provide a warning?",
        "type": "string"
      },
      "startRequiresWallet": {
        "default": true,
        "description": "If true, users must set their wallet address with the /wallet command before they can start tasks.",
        "type": "boolean"
      },
      "maxConcurrentTasks": {
        "description": "The maximum number of tasks a user can have assigned to them at once, based on their role.",
        "examples": [
          {
            "collaborator": 10,
            "contributor": 2
          }
        ],
        "default": {},
        "type": "object",
        "properties": {
          "collaborator": {
            "default": 10,
            "type": "number"
          },
          "contributor": {
            "default": 2,
            "type": "number"
          }
        }
      },
      "assignedIssueScope": {
        "default": "org",
        "description": "When considering a user for a task: should we consider their assigned issues at the org, repo, or network level?",
        "examples": ["org", "repo", "network"],
        "anyOf": [
          {
            "const": "org",
            "type": "string"
          },
          {
            "const": "repo",
            "type": "string"
          },
          {
            "const": "network",
            "type": "string"
          }
        ]
      },
      "emptyWalletText": {
        "default": "Please set your wallet address with the /wallet command first and try again.",
        "description": "a message to display when a user tries to start a task without setting their wallet address.",
        "type": "string"
      },
      "rolesWithReviewAuthority": {
        "default": ["OWNER", "ADMIN", "MEMBER", "COLLABORATOR"],
        "uniqueItems": true,
        "description": "When considering a user for a task: which roles should be considered as having review authority? All others are ignored.",
        "examples": [
          ["OWNER", "ADMIN"],
          ["MEMBER", "COLLABORATOR"]
        ],
        "type": "array",
        "items": {
          "anyOf": [
            {
              "const": "OWNER",
              "type": "string"
            },
            {
              "const": "ADMIN",
              "type": "string"
            },
            {
              "const": "MEMBER",
              "type": "string"
            },
            {
              "const": "COLLABORATOR",
              "type": "string"
            }
          ]
        }
      },
      "requiredLabelsToStart": {
        "default": [],
        "description": "If set, a task must have at least one of these labels to be started.",
        "examples": [["Priority: 5 (Emergency)"], ["Good First Issue"]],
        "type": "array",
        "items": {
          "type": "object",
          "required": ["name"],
          "properties": {
            "name": {
              "description": "The name of the required labels to start the task.",
              "type": "string"
            },
            "allowedRoles": {
              "description": "The list of allowed roles to start the task with the given label.",
              "uniqueItems": true,
              "default": [],
              "examples": [["collaborator", "contributor"]],
              "type": "array",
              "items": {
                "anyOf": [
                  {
                    "const": "collaborator",
                    "type": "string"
                  },
                  {
                    "const": "contributor",
                    "type": "string"
                  }
                ]
              }
            }
          }
        }
      },
      "taskAccessControl": {
        "default": {},
        "type": "object",
        "properties": {
          "usdPriceMax": {
            "default": {},
            "description": "The maximum USD price a user can start a task with, based on their role. Set to a negative value to indicate only core operations (only collaborators) can be started.",
            "examples": [
              {
                "collaborator": "Infinity",
                "contributor": 0
              },
              {
                "collaborator": "Infinity",
                "contributor": -1
              }
            ],
            "type": "object",
            "properties": {
              "collaborator": {
                "default": "Infinity",
                "anyOf": [
                  {
                    "type": "number"
                  },
                  {
                    "const": "Infinity",
                    "type": "string"
                  }
                ]
              },
              "contributor": {
                "default": "Infinity",
                "anyOf": [
                  {
                    "type": "number"
                  },
                  {
                    "const": "Infinity",
                    "type": "string"
                  }
                ]
              }
            }
          },
          "accountRequiredAge": {
            "default": {
              "minimumDays": 365.25
            },
            "type": "object",
            "properties": {
              "minimumDays": {
                "default": 365.25,
                "minimum": 0,
                "description": "Minimum number of days a GitHub account must exist before starting a task.",
                "examples": [0, 30, 365.25],
                "type": "number"
              }
            }
          },
          "experience": {
            "default": {
              "priorityThresholds": [
                {
                  "label": "Priority: 0 (Regression)",
                  "minimumXp": -2000
                },
                {
                  "label": "Priority: 1 (Normal)",
                  "minimumXp": -1000
                },
                {
                  "label": "Priority: 2 (Medium)",
                  "minimumXp": 0
                },
                {
                  "label": "Priority: 3 (High)",
                  "minimumXp": 1000
                },
                {
                  "label": "Priority: 4 (Urgent)",
                  "minimumXp": 2000
                },
                {
                  "label": "Priority: 5 (Emergency)",
                  "minimumXp": 3000
                }
              ]
            },
            "type": "object",
            "properties": {
              "priorityThresholds": {
                "default": [
                  {
                    "label": "Priority: 0 (Regression)",
                    "minimumXp": -2000
                  },
                  {
                    "label": "Priority: 1 (Normal)",
                    "minimumXp": -1000
                  },
                  {
                    "label": "Priority: 2 (Medium)",
                    "minimumXp": 0
                  },
                  {
                    "label": "Priority: 3 (High)",
                    "minimumXp": 1000
                  },
                  {
                    "label": "Priority: 4 (Urgent)",
                    "minimumXp": 2000
                  },
                  {
                    "label": "Priority: 5 (Emergency)",
                    "minimumXp": 3000
                  }
                ],
                "description": "Mappings between priority labels and minimum XP required to start tasks with those labels.",
                "examples": [
                  [
                    {
                      "label": "Priority: 0",
                      "minimumXp": -2000
                    },
                    {
                      "label": "Priority: 5 (Emergency)",
                      "minimumXp": 3000
                    }
                  ]
                ],
                "type": "array",
                "items": {
                  "type": "object",
                  "required": ["label"],
                  "properties": {
                    "label": {
                      "description": "Issue label to match for experience gating.",
                      "examples": ["Priority: 1 (Normal)", "prio 1"],
                      "type": "string"
                    },
                    "minimumXp": {
                      "default": 0,
                      "description": "Minimum XP required to start a task with the associated label.",
                      "examples": [-2000, 0, 3000],
                      "type": "number"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "homepage_url": "https://command-start-stop-main.deno.dev"
}
